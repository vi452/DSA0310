import spacy

nlp = spacy.load("en_core_web_sm")

def resolve_references(text):
    doc = nlp(text)
    last_noun = None
    resolved = []

    for token in doc:
        if token.pos_ == "NOUN" or token.pos_ == "PROPN":
            last_noun = token.text
            resolved.append(token.text)
        elif token.pos_ == "PRON" and last_noun:
            resolved.append(f"{token.text}({last_noun})")
        else:
            resolved.append(token.text)

    return " ".join(resolved)

text = "John bought a car. He loves it."
print(resolve_references(text))
